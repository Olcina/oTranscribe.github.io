function setFromTimestamp(a,b){ts.setFrom(a,b)}!function(a){function b(a,b,c,d){if(a.tag.format&&c.length>0){c.push("\n");for(var e=0;d>e;e++)c.push("	")}}function c(d,e){var f=[],g=0==d.attributes.length,h=0;if(d.tag.isComment)e.allowComments&&(f.push("<!--"),f.push(d.tag.rawAttributes),f.push(">"),e.format&&b(d,e,f,h-1));else{var i=0==e.removeTagsAndContent.length||-1==a.inArray(d.tag.name,e.removeTagsAndContent),n=i&&d.tag.render&&(0==e.allowedTags.length||a.inArray(d.tag.name,e.allowedTags)>-1)&&(0==e.removeTags.length||-1==a.inArray(d.tag.name,e.removeTags));if(!d.isRoot&&n&&(f.push("<"),f.push(d.tag.name),a.each(d.attributes,function(){if(-1==a.inArray(this.name,e.removeAttrs)){var b=RegExp(/^(['"]?)(.*?)['"]?$/).exec(this.value),c=b[2],g=b[1]||"'";"class"==this.name&&e.allowedClasses.length>0&&(c=a.grep(c.split(" "),function(b){return a.grep(e.allowedClasses,function(c){return c==b||c[0]==b&&(1==c.length||a.inArray(d.tag.name,c[1])>-1)}).length>0}).join(" ")),null!=c&&(c.length>0||a.inArray(this.name,d.tag.requiredAttributes)>-1)&&(f.push(" "),f.push(this.name),f.push("="),f.push(g),f.push(c),f.push(g))}})),d.tag.isSelfClosing)n&&f.push(" />"),g=!1;else if(d.tag.isNonClosing)g=!1;else if(i){if(!d.isRoot&&n&&f.push(">"),h=e.formatIndent++,d.tag.toProtect)p=a.htmlClean.trim(d.children.join("")).replace(/<br>/gi,"\n"),f.push(p),g=0==p.length;else{for(var p=[],q=0;q<d.children.length;q++){var r=d.children[q],s=a.htmlClean.trim(o(l(r)?r:r.childrenToString()));m(r)&&q>0&&s.length>0&&(j(r)||k(d.children[q-1]))&&p.push(" "),l(r)?s.length>0&&p.push(s):(q!=d.children.length-1||"br"!=r.tag.name)&&(e.format&&b(r,e,p,h),p=p.concat(c(r,e)))}e.formatIndent--,p.length>0&&(e.format&&"\n"!=p[0]&&b(d,e,f,h),f=f.concat(p),g=!1)}!d.isRoot&&n&&(e.format&&b(d,e,f,h-1),f.push("</"),f.push(d.tag.name),f.push(">"))}if(!d.tag.allowEmpty&&g)return[]}return f}function d(b,c){return f(b,function(b){return a.inArray(b.tag.nameOriginal,c)>-1})}function e(a){return f(a,function(a){return a.isRoot||!a.tag.isInline})}function f(a,b,c){c=c||1;var d=a[a.length-c];return b(d)?!0:a.length-c>0&&f(a,b,c+1)?(a.pop(),!0):!1}function g(a){return a?(this.tag=a,this.isRoot=!1):(this.tag=new i("root"),this.isRoot=!0),this.attributes=[],this.children=[],this.hasAttribute=function(a){for(var b=0;b<this.attributes.length;b++)if(this.attributes[b].name==a)return!0;return!1},this.childrenToString=function(){return this.children.join("")},this}function h(a,b){return this.name=a,this.value=b,this}function i(b,c,d,e){return this.name=b.toLowerCase(),this.nameOriginal=this.name,this.render=!0,this.init=function(){if("--"==this.name?(this.isComment=!0,this.isSelfClosing=!0,this.format=!0):(this.isComment=!1,this.isSelfClosing=a.inArray(this.name,v)>-1,this.isNonClosing=a.inArray(this.name,w)>-1,this.isClosing=void 0!=c&&c.length>0,this.isInline=a.inArray(this.name,p)>-1,this.disallowNest=a.inArray(this.name,r)>-1,this.requiredParent=t[a.inArray(this.name,t)+1],this.allowEmpty=e&&a.inArray(this.name,e.allowEmpty)>-1,this.toProtect=a.inArray(this.name,u)>-1,this.format=a.inArray(this.name,q)>-1||!this.isInline),this.rawAttributes=d,this.requiredAttributes=y[a.inArray(this.name,y)+1],e){if(e.tagAttributesCache||(e.tagAttributesCache=[]),-1==a.inArray(this.name,e.tagAttributesCache)){for(var b=x[a.inArray(this.name,x)+1].slice(0),f=0;f<e.allowedAttributes.length;f++){var g=e.allowedAttributes[f][0];(1==e.allowedAttributes[f].length||a.inArray(this.name,e.allowedAttributes[f][1])>-1)&&-1==a.inArray(g,b)&&b.push(g)}e.tagAttributesCache.push(this.name),e.tagAttributesCache.push(b)}this.allowedAttributes=e.tagAttributesCache[a.inArray(this.name,e.tagAttributesCache)+1]}},this.init(),this.rename=function(a){this.name=a,this.init()},this}function j(b){for(;n(b)&&b.children.length>0;)b=b.children[0];if(!l(b))return!1;var c=o(b);return c.length>0&&a.htmlClean.isWhitespace(c.charAt(0))}function k(b){for(;n(b)&&b.children.length>0;)b=b.children[b.children.length-1];if(!l(b))return!1;var c=o(b);return c.length>0&&a.htmlClean.isWhitespace(c.charAt(c.length-1))}function l(a){return a.constructor==String}function m(a){return l(a)||a.tag.isInline}function n(a){return a.constructor==g}function o(a){return a.replace(/&nbsp;|\n/g," ").replace(/\s\s+/g," ")}a.fn.htmlClean=function(b){return this.each(function(){this.value?this.value=a.htmlClean(this.value,b):this.innerHTML=a.htmlClean(this.innerHTML,b)})},a.htmlClean=function(b,f){f=a.extend({},a.htmlClean.defaults,f),f.allowEmpty=s.concat(f.allowEmpty);var j,k=/(<(\/)?(\w+:)?([\w]+)([^>]*)>)|<!--(.*?--)>/gi,m=/([\w\-]+)\s*=\s*(".*?"|'.*?'|[^\s>\/]*)/gi,n=new g,o=[n],p=n;f.bodyOnly&&(j=/<body[^>]*>((\n|.)*)<\/body>/i.exec(b))&&(b=j[1]),b=b.concat("<xxx>");for(var q;j=k.exec(b);){var r=j[6]?new i("--",null,j[6],f):new i(j[4],j[2],j[5],f),t=b.substring(q,j.index);if(t.length>0){var u=p.children[p.children.length-1];p.children.length>0&&l(u=p.children[p.children.length-1])?p.children[p.children.length-1]=u.concat(t):p.children.push(t)}if(q=k.lastIndex,r.isClosing)d(o,[r.name])&&(o.pop(),p=o[o.length-1]);else{for(var v,w=new g(r);v=m.exec(r.rawAttributes);){if("style"==v[1].toLowerCase()&&f.replaceStyles)for(var x=!r.isInline,y=0;y<f.replaceStyles.length;y++)f.replaceStyles[y][0].test(v[2])&&(x||(r.render=!1,x=!0),p.children.push(w),o.push(w),p=w,r=new i(f.replaceStyles[y][1],"","",f),w=new g(r));null!=r.allowedAttributes&&(0==r.allowedAttributes.length||a.inArray(v[1],r.allowedAttributes)>-1)&&w.attributes.push(new h(v[1],v[2]))}a.each(r.requiredAttributes,function(){var a=this.toString();w.hasAttribute(a)||w.attributes.push(new h(a,""))});for(var z=0;z<f.replace.length;z++)for(var A=0;A<f.replace[z][0].length;A++){var B="string"==typeof f.replace[z][0][A];if(B&&f.replace[z][0][A]==r.name||!B&&f.replace[z][0][A].test(j)){r.rename(f.replace[z][1]),z=f.replace.length;break}}var C=!0;if(p.isRoot||(p.tag.isInline&&!r.isInline?(C=e(o))&&(p=o[o.length-1]):p.tag.disallowNest&&r.disallowNest&&!r.requiredParent?C=!1:r.requiredParent&&(C=d(o,r.requiredParent))&&(p=o[o.length-1])),C)if(p.children.push(w),r.toProtect)for(var D;D=k.exec(b);){var E=new i(D[4],D[1],D[5],f);if(E.isClosing&&E.name==r.name){w.children.push(RegExp.leftContext.substring(q)),q=k.lastIndex;break}}else r.isSelfClosing||r.isNonClosing||(o.push(w),p=w)}}return a.htmlClean.trim(c(n,f).join(""))},a.htmlClean.defaults={bodyOnly:!0,allowedTags:[],removeTags:["basefont","center","dir","font","frame","frameset","iframe","isindex","menu","noframes","s","strike","u"],removeTagsAndContent:[],allowedAttributes:[],removeAttrs:[],allowedClasses:[],format:!1,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]],allowComments:!1,allowEmpty:[]},a.htmlClean.trim=function(b){return a.htmlClean.trimStart(a.htmlClean.trimEnd(b))},a.htmlClean.trimStart=function(b){return b.substring(a.htmlClean.trimStartIndex(b))},a.htmlClean.trimStartIndex=function(b){for(var c=0;c<b.length-1&&a.htmlClean.isWhitespace(b.charAt(c));c++);return c},a.htmlClean.trimEnd=function(b){return b.substring(0,a.htmlClean.trimEndIndex(b))},a.htmlClean.trimEndIndex=function(b){for(var c=b.length-1;c>=0&&a.htmlClean.isWhitespace(b.charAt(c));c--);return c+1},a.htmlClean.isWhitespace=function(b){return-1!=a.inArray(b,z)};var p=["a","abbr","acronym","address","b","big","br","button","caption","cite","code","del","em","font","hr","i","input","img","ins","label","legend","map","q","s","samp","select","option","param","small","span","strike","strong","sub","sup","tt","u","var"],q=["address","button","caption","code","input","label","legend","select","option","param"],r=["h1","h2","h3","h4","h5","h6","p","th","td","object"],s=["th","td"],t=[null,"li",["ul","ol"],"dt",["dl"],"dd",["dl"],"td",["tr"],"th",["tr"],"tr",["table","thead","tbody","tfoot"],"thead",["table"],"tbody",["table"],"tfoot",["table"],"param",["object"]],u=["script","style","pre","code"],v=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],w=["!doctype","?xml"],x=[["class"],"?xml",[],"!doctype",[],"a",["accesskey","class","href","name","title","rel","rev","type","tabindex"],"abbr",["class","title"],"acronym",["class","title"],"blockquote",["cite","class"],"button",["class","disabled","name","type","value"],"del",["cite","class","datetime"],"form",["accept","action","class","enctype","method","name"],"iframe",["class","height","name","sandbox","seamless","src","srcdoc","width"],"input",["accept","accesskey","alt","checked","class","disabled","ismap","maxlength","name","size","readonly","src","tabindex","type","usemap","value"],"img",["alt","class","height","src","width"],"ins",["cite","class","datetime"],"label",["accesskey","class","for"],"legend",["accesskey","class"],"link",["href","rel","type"],"meta",["content","http-equiv","name","scheme","charset"],"map",["name"],"optgroup",["class","disabled","label"],"option",["class","disabled","label","selected","value"],"q",["class","cite"],"script",["src","type"],"select",["class","disabled","multiple","name","size","tabindex"],"style",["type"],"table",["class","summary"],"th",["class","colspan","rowspan"],"td",["class","colspan","rowspan"],"textarea",["accesskey","class","cols","disabled","name","readonly","rows","tabindex"],"param",["name","value"],"embed",["height","src","type","width"]],y=[[],"img",["alt"]],z=["Â "," ","	","\n","\r","\f"]}(jQuery);var toMarkdown=function(a){function b(a,b){var c="void"===b.type?"<"+b.tag+"\\b([^>]*)\\/?>":"<"+b.tag+"\\b([^>]*)>([\\s\\S]*?)<\\/"+b.tag+">",d=new RegExp(c,"gi"),e="";return e="string"==typeof b.replacement?a.replace(d,b.replacement):a.replace(d,function(a,c,d,e){return b.replacement.call(this,a,c,d,e)})}function c(a){return new RegExp(a+"\\s*=\\s*[\"']?([^\"']*)[\"']?","i")}function d(a){return a=a.replace(/<(ul|ol)\b[^>]*>([\s\S]*?)<\/\1>/gi,function(a,b,c){var d=c.split("</li>");for(d.splice(d.length-1,1),h=0,i=d.length;i>h;h++)if(d[h]){var e="ol"===b?h+1+".  ":"*   ";d[h]=d[h].replace(/\s*<li[^>]*>([\s\S]*)/i,function(a,b){return b=b.replace(/^\s+/,""),b=b.replace(/\n\n/g,"\n\n    "),b=b.replace(/\n([ ]*)+(\*|\d+\.) /g,"\n$1    $2 "),e+b})}return d.join("\n")}),"\n\n"+a.replace(/[ \t]+\n|\s+$/g,"")}function e(a){return a=a.replace(/<blockquote\b[^>]*>([\s\S]*?)<\/blockquote>/gi,function(a,b){return b=b.replace(/^\s+|\s+$/g,""),b=f(b),b=b.replace(/^/gm,"> "),b=b.replace(/^(>([ \t]{2,}>)+)/gm,"> >")})}function f(a){return a=a.replace(/^[\t\r\n]+|[\t\r\n]+$/g,""),a=a.replace(/\n\s+\n/g,"\n\n"),a=a.replace(/\n{3,}/g,"\n\n")}for(var g=[{patterns:"p",replacement:function(a,b,c){return c?"\n\n"+c+"\n":""}},{patterns:"br",type:"void",replacement:"\n"},{patterns:"h([1-6])",replacement:function(a,b,c,d){for(var e="",f=0;b>f;f++)e+="#";return"\n\n"+e+" "+d+"\n"}},{patterns:"hr",type:"void",replacement:"\n\n* * *\n"},{patterns:"a",replacement:function(a,b,d){var e=b.match(c("href")),f=b.match(c("title"));return e?"["+d+"]("+e[1]+(f&&f[1]?' "'+f[1]+'"':"")+")":a}},{patterns:["b","strong"],replacement:function(a,b,c){return c?"**"+c+"**":""}},{patterns:["i","em"],replacement:function(a,b,c){return c?"_"+c+"_":""}},{patterns:"code",replacement:function(a,b,c){return c?"`"+c+"`":""}},{patterns:"img",type:"void",replacement:function(a,b){var d=b.match(c("src")),e=b.match(c("alt")),f=b.match(c("title"));return"!["+(e&&e[1]?e[1]:"")+"]("+d[1]+(f&&f[1]?' "'+f[1]+'"':"")+")"}}],h=0,i=g.length;i>h;h++)if("string"==typeof g[h].patterns)a=b(a,{tag:g[h].patterns,replacement:g[h].replacement,type:g[h].type});else for(var j=0,k=g[h].patterns.length;k>j;j++)a=b(a,{tag:g[h].patterns[j],replacement:g[h].replacement,type:g[h].type});a=a.replace(/<pre\b[^>]*>`([\s\S]*)`<\/pre>/gi,function(a,b){return b=b.replace(/^\t+/g,"  "),b=b.replace(/\n/g,"\n    "),"\n\n    "+b+"\n"}),a=a.replace(/^(\s{0,3}\d+)\. /g,"$1\\. ");for(var l=/<(ul|ol)\b[^>]*>(?:(?!<ul|<ol)[\s\S])*?<\/\1>/gi;a.match(l);)a=a.replace(l,function(a){return d(a)});for(var m=/<blockquote\b[^>]*>((?:(?!<blockquote)[\s\S])*?)<\/blockquote>/gi;a.match(m);)a=a.replace(m,function(a){return e(a)});return f(a)};"object"==typeof exports&&(exports.toMarkdown=toMarkdown);var oT={};!function(){function a(){var a=$(".controls"),b=$(window).width()-(a.width()+$(".title").outerWidth()+$(".help-title").outerWidth());$("#player-hook").width($("#player-hook").width()+b-10)}function b(){$(".help-title").removeClass("active"),$(".help").removeClass("active"),$(".title").toggleClass("active"),$(".about").toggleClass("active")}function c(){$(".textbox-container").height(window.innerHeight-36)}function d(){var a=parseInt($("#textbox").offset().left,10)+700;$(".text-panel").css("left",a)}function e(a){var b,c=0,d=a.length;for(b=0;d>=b;b++)" "==a.charAt(b)&&c++;return c+1}function f(){var a=e(document.getElementById("textbox").innerHTML);document.getElementById("wc").innerHTML=a}function g(){setInterval(function(){f()},1e3)}function h(){var a=document.queryCommandState("Bold"),b=document.getElementById("icon-b"),c=document.queryCommandState("italic"),d=document.getElementById("icon-i");b.className=a===!0?"icon-bold active":"icon-bold",d.className=c===!0?"icon-italic active":"icon-italic"}function i(){setInterval(function(){h()},100)}function j(){var a=document.getElementById("textbox");localStorage.getItem("autosave")&&(a.innerHTML=localStorage.getItem("autosave")),setTimeout(function(){setInterval(function(){localStorage.setItem("autosave",a.innerHTML)},1e3)},5e3)}function k(){localStorage.getItem("lastfile")&&(document.getElementById("lastfile").innerHTML="Last file: "+localStorage.getItem("lastfile"),b())}function l(){var a=$(".file-input-wrapper")[0];a.addEventListener("dragover",function(){$(".file-input-wrapper").addClass("hover")},!1),a.addEventListener("dragleave",function(){$(".file-input-wrapper").removeClass("hover")},!1)}function m(a){var b=document.createElement("audio");return!(!b.canPlayType||!b.canPlayType("audio/"+a+";").replace(/no/,""))}function n(a){if("audio"==a)var b=["mp3","ogg","webm","wav"];else if("video"==a)var b=["mp4","ogg","webm"];var c=[],d=0;return b.forEach(function(a){1==m(a)&&(c[d]=a,d++)}),c.join("/")}function o(a){var b=a.type.split("/")[0],c=document.createElement(b);return!(!c.canPlayType||!c.canPlayType(a.type).replace(/no/,""))}function p(b){var c=b.files[0];if(o(c)===!0)oT.media.create(c),oT.media.initProgressor(),q(),a(),localStorage.setItem("lastfile",c.name);else{var d="Your browser does not support "+c.type.split("/")[1]+' files. Switch to a different browser or <a href="http://media.io">convert your file</a> to another format.';$("#formats").html(d).addClass("warning")}}function q(){$(".topbar").toggleClass("inputting"),$(".input").toggleClass("active"),$(".sbutton.time").toggleClass("active"),$(".text-panel").toggleClass("editing")}function r(){document.getElementById("formats").innerHTML="Your browser supports "+n("audio")+" audio files and "+n("video")+" video files. You may need to <a href='http://media.io'>convert your file</a>."}function s(){$(".start").html("Start transcribing").addClass("ready")}function t(){var a=!!document.createElement("audio").canPlayType,b=document.getElementById("textbox").contentEditable,c=!!window.FileReader;return a&&b&&c?!0:!1}function u(){t()===!1&&(document.getElementById("old-browser").innerHTML='Your browser does not appear to support some HTML5 features necessary for oTranscribe to run correctly. Please switch to a <a href="http://browsehappy.com">modern desktop browser</a>.')}function v(){var a=window.navigator.userAgent;a.indexOf("CrOS")>-1&&(Mousetrap.bind("ctrl+1",function(a){return z(a),skip("backwards"),!1}),Mousetrap.bind("ctrl+2",function(a){return z(a),skip("forwards"),!1}),Mousetrap.bind("ctrl+3",function(a){return z(a),speed("down"),!1}),Mousetrap.bind("ctrl+4",function(a){return z(a),speed("up"),!1}))}function w(){u(),j(),k(),r(),c(),d(),l(),g(),i(),v(),s()}function x(){B.mdButton(),B.txtButton(),A.handleClientLoad();var a=$("#icon-exp").offset(),b=parseInt($("body").width()-a.left-35),c=parseInt(a.top)+50;$(".export-panel").css({right:b,top:c}).addClass("active")}function y(){$(".export-panel").removeClass("active"),$(".export-block-gd")[0].outerHTML=A.button}function z(a){a.preventDefault?a.preventDefault():a.returnValue=!1}oT.media={},oT.media.e=function(){return document.getElementById("media")||null},oT.media.create=function(a){if(window.webkitURL)var b=window.webkitURL.createObjectURL(a);else var b=window.URL.createObjectURL(a);if(a.type.indexOf("video")>-1){var c=document.createElement("video");c.src=b,c.id="media",c.style.width=oT.media.videoWidth(),document.body.appendChild(c)}else $("#player-hook").append('<audio id="media" src=""></audio>'),oT.media.e().src=b;oT.media.e().title=a.name},oT.media.playPause=function(){var a=oT.media.e(),b=!a.paused,c=$(".play-pause");1==b?(a.pause(),c.removeClass("playing")):(a.currentTime=a.currentTime-1.5,a.play(),c.addClass("playing"))},oT.media.skip=function(a){var b=oT.media.e();"forwards"==a?b.currentTime=b.currentTime+1.5:"backwards"==a&&(b.currentTime=b.currentTime-1.5)},oT.media.speed=function(a){var b,c=.5,d=2,e=.25,f=oT.media.e().playbackRate;"up"==a&&d>f?b=f+e:"down"==a&&f>c?b=f-e:"reset"==a?b=1:"number"==typeof a&&(b=a),"undefined"!=typeof b&&(oT.media.e().playbackRate=b,document.getElementById("slider3").value=b)},oT.media.videoWidth=function(){var a=document.getElementById("textbox").getBoundingClientRect().left;return a>200?a-40+"px":void 0},oT.media.initAudioJS=function(){audiojs.events.ready(function(){audiojs.createAll()})},oT.media.initProgressor=function(){new Progressor({media:oT.media.e(),bar:$("#player-hook")[0],text:oT.media.e().title,time:$("#player-time")[0]})},w(),$(window).resize(function(){c(),a(),d(),document.getElementById("media").style.width=oT.media.videoWidth()});var A={CLIENT_ID:"219206830455.apps.googleusercontent.com",SCOPES:"https://www.googleapis.com/auth/drive"};A.handleClientLoad=function(){window.setTimeout(A.checkAuth,1)},A.checkAuth=function(){gapi.auth.authorize({client_id:A.CLIENT_ID,scope:A.SCOPES,immediate:!0},A.handleAuthResult)},A.handleAuthResult=function(a){a&&!a.error?A.updateButton("Google Drive",!0,"javascript:insertFile();"):document.getElementById("x-gd-sign").onclick=function(){gapi.auth.authorize({client_id:A.CLIENT_ID,scope:A.SCOPES,immediate:!1},A.handleAuthResult)}},A.updateButton=function(a,b,c){var d=$(".export-block-gd");d[0].innerHTML=a,1==b?d.addClass("gd-authenticated").removeClass("unauth"):0==b&&d.removeClass("gd-authenticated"),d[0].href=c},A.button='<a class="export-block-gd unauth" id="x-gd" target="_blank" href="javascript:void(0);">Google Drive<div class="sign-in" id="x-gd-sign">Sign in</div></a>',window.insertFile=function(a){A.updateButton("Sending to Drive...",!1);const b="-------314159265358979323846",c="\r\n--"+b+"\r\n",d="\r\n--"+b+"--";var e=B.reader();e.onload=function(){var f="application/octet-stream",g={title:B.name(),mimeType:"text/html"},h=btoa(e.result),i=c+"Content-Type: application/json\r\n\r\n"+JSON.stringify(g)+c+"Content-Type: "+f+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+h+d,j=gapi.client.request({path:"/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart",convert:!0},headers:{"Content-Type":'multipart/mixed; boundary="'+b+'"'},body:i});a||(a=function(a){A.updateButton("Open in Drive &rarr;",!0,a.alternateLink)}),j.execute(a)}};var B={md:function(){var a=document.getElementById("textbox").innerHTML,b=$.htmlClean(a,{format:!0,removeTags:["div","span","img","pre"]}),c=toMarkdown(b);return c.replace(/\t/gm,"")},txt:function(){var a=document.getElementById("textbox").innerHTML,b=$.htmlClean(a,{format:!0,removeTags:["div","span","img","em","strong","p","pre"]});return b.replace(/\t/gm,"")},utf8_to_b64:function(a){return window.btoa(unescape(encodeURIComponent(a)))},mdButton:function(){var a=B.md(),b=document.getElementById("x-md");b.download=B.name()+".md",b.href="data:text/plain;base64,"+B.utf8_to_b64(a)},txtButton:function(){var a=B.txt(),b=document.getElementById("x-txt");b.download=B.name()+".txt",b.href="data:text/plain;base64,"+B.utf8_to_b64(a)},name:function(){var a=new Date;return"Transcript exported "+a.toUTCString()}};B.createBlob=function(){var a=document.getElementById("textbox").innerHTML,b=[a],c=new Blob(b,{type:"text/html"});return c},B.reader=function(){var a=new FileReader,b=B.createBlob();return a.readAsBinaryString(b),a},Mousetrap.bind("escape",function(a){return z(a),oT.media.playPause(),!1}),Mousetrap.bind("f1",function(a){return z(a),oT.media.skip("backwards"),!1}),Mousetrap.bind("f2",function(a){return z(a),oT.media.skip("forwards"),!1}),Mousetrap.bind("f3",function(a){return z(a),oT.media.speed("down"),!1}),Mousetrap.bind("f4",function(a){return z(a),oT.media.speed("up"),!1}),Mousetrap.bind("mod+j",function(a){return z(a),ts.insert(),!1}),Mousetrap.bind("mod+s",function(a){return z(a),alert("No need to manually save - your transcript is automatically backed up continuously."),!1}),Mousetrap.bind("mod+b",function(a){return z(a),document.execCommand("bold",!1,null),!1}),Mousetrap.bind("mod+i",function(a){return z(a),document.execCommand("italic",!1,null),!1}),$(".play-pause").click(function(){oT.media.playPause()}),$(".skip-backwards").click(function(){oT.media.skip("backwards")}),$(".skip-forwards").click(function(){oT.media.skip("forwards")}),$(".speed").click(function(){$(".speed-box").not(":hover").length&&$(this).toggleClass("fixed")}),$("#slider3").change(function(){oT.media.speed(this.valueAsNumber)}),$(".title").click(function(){b()}),$(".about .start.ready").click(function(){b()}),$("#attach").change(function(){p(this)}),$(".sbutton.export").click(function(){x()}),$(".textbox-container").click(function(a){return $(a.target).is("#icon-exp")||$(a.target).is(".export-panel")||$(a.target).is(".sbutton.export")?void a.preventDefault():void y()}),$(".export-panel").click(function(a){a.stopPropagation()})}();var ts={split:function(a){var b=a.split(":"),c=60*+b[0]+ +b[1];return c},setFrom:function(a,b){1==b.childNodes.length&&(oT.media.e().currentTime=ts.split(a))},get:function(){var a=oT.media.e().currentTime,b=Math.floor(a/60),c=("0"+Math.round(a-60*b)).slice(-2);return b+":"+c},insert:function(){document.execCommand("insertHTML",!1,'<span class="timestamp" contenteditable="false" onclick="var x = this; ts.setFrom(\''+ts.get()+"', x);\">"+ts.get()+"</span>&nbsp;"),$(".timestamp").each(function(){$(this)[0].contentEditable=!1})}};